{"version":3,"sources":["webpack:///./src/views/PrevOrder.vue","webpack:///src/views/PrevOrder.vue","webpack:///./src/views/PrevOrder.vue?c0dd","webpack:///./src/views/PrevOrder.vue?4d9c"],"names":["staticClass","_c","_v","on","_vm","attrs","orders","scopedSlots","key","fn","item","model","value","callback","$$v","staticRenderFns","moment","name","components","mounted","watch","data","startDate","endDate","page","pageCount","itemsPerPage","totalVisible","headers","text","align","sortable","methods","search","orderApi","then","response","catch","error","console","renderList","orderId","orderStatus","orderTime","orderItemNames","orderPrice","userName","checkDate","alert","inputStartDate","inputEndDate","getOrderItemName","component"],"mappings":"yLAAqE,EAAqC,W,IAAeA,OAA6DC,EAAG,EAAK,MAAKC,G,OAAiC,QAAQ,CAAT,YAAP,aAA2BC,CAAE,EAAC,Q,YAASC,gDAAT,mCAAvC,MAAkEF,CAAwDG,MAAM,cAAP,CAAyB,MAAC,kEAA5C,MAAkF,CAAeA,MAAM,UAAP,CAAyB,UAAC,qCAA1H,MAA+JJ,CAAsBD,MAAW,OAA8GA,IAA0BK,UAAM,mBAAuB,YAAYC,SAAnC,C,YAA0C,c,CAAkC,uBAAsB,mDAAlG,YAAjC,cAAuIC,OAAqBC,QAAI,UAAcC,MAAG,S,iBAAWC,eAAF,sBAAS,I,YAAyC,O,+BAAgB,K,IAA2B,gCAApI,OAA6I,QAAM,EAACV,QAAY,oBAAuC,SAAiEW,YAAM,oB,CAACC,SAAD,C,MAAkBC,C,OAAyBT,EAASU,UAAI,gBAAxD,uBAAlI,MAAj0B,EAAT,KAA5D,qB,UAIA,WAAiBC,W,6DC8CjB,MAAMC,EAAS,EAAQ,QAER,OACfC,iBACAC,YACA,qBACA,8BAEAC,mBACA,eAEAC,OACA,gBACA,gBAGAC,gBACA,OAEAC,aACAC,WAGAC,OACAC,YACAC,gBACAC,gBAGAC,SACA,CACAC,YACAC,cACAC,YACAnB,iBAEA,CAAAiB,YAAAjB,qBACA,CAAAiB,YAAAjB,mBACA,CAAAiB,YAAAjB,wBACA,CAAAiB,YAAAjB,oBACA,CAAAiB,WAAAjB,kBACA,CAAAiB,YAAAjB,eAAAmB,cAEAzB,YAGA0B,SACAC,kBACA,kBAEAC,iEACAC,KAAAC,IACA,0BAEAC,MAAAC,IACAC,kBAGAC,uBACA,sBAEA,eACAlC,cAEA,kBACAmC,kBACAC,oEACAC,sBACAC,mDACAC,wDACAC,wBAKA,oBACA,wBACA,4BAEAC,qBACA,qCAKA,0CACAC,+BACA,IANAA,4BACA,IAUAC,2BACA,kBAEAC,yBACA,gBAEAC,6BACA,iBACA,qBACA,YACA,EACA,IACA,uBADA,KCzJmV,I,YCO/UC,EAAY,eACd,EACA,EACArC,GACA,EACA,KACA,WACA,MAIa,aAAAqC,E","file":"js/chunk-2d0c7ca8.5561a4a7.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"dashboard\"},[_c('v-subheader',{staticClass:\"py-0 d-flex justify-space-between rounded-lg\"},[_c('h3',[_vm._v(\"지난 주문\")]),_c('v-btn',{attrs:{\"color\":\"success\"},on:{\"click\":_vm.search}},[_vm._v(\" 검색 \")])],1),_c('br'),_c('v-row',[_c('date-picker',{attrs:{\"label\":'시작일'},on:{\"inputDate\":_vm.inputStartDate}}),_c('date-picker',{attrs:{\"label\":'종료일'},on:{\"inputDate\":_vm.inputEndDate}})],1),_c('v-row',[_c('div',{staticClass:\"subtitle-1\"},[_vm._v(_vm._s(_vm.startDate)+\" ~ \"+_vm._s(_vm.endDate)+\" 내역\")])]),_c('br'),_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.orders,\"items-per-page\":_vm.itemsPerPage,\"hide-default-footer\":\"\"},scopedSlots:_vm._u([{key:\"item.detail\",fn:function({ item }){return [_c('order-detail-dialog',{attrs:{\"dialog\":false,\"orderId\":item.orderId}})]}}])}),_c('div',{staticClass:\"text-center pt-2\"},[_c('v-pagination',{attrs:{\"length\":_vm.pageCount,\"total-visible\":_vm.totalVisible},model:{value:(_vm.page),callback:function ($$v) {_vm.page=$$v},expression:\"page\"}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"dashboard\">\n    <v-subheader class=\"py-0 d-flex justify-space-between rounded-lg\">\n      <h3>지난 주문</h3>\n      <v-btn color=\"success\" v-on:click=\"search\">\n        검색\n      </v-btn>\n    </v-subheader>\n    <br>\n\n    <v-row>\n      <date-picker :label=\" '시작일' \" @inputDate=\"inputStartDate\"></date-picker>\n      <date-picker :label=\" '종료일' \" @inputDate=\"inputEndDate\"></date-picker>\n    </v-row>\n\n    <v-row>\n      <div class=\"subtitle-1\">{{startDate}} ~ {{endDate}} 내역</div>\n    </v-row>\n    <br>\n\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"orders\"\n        :items-per-page=\"itemsPerPage\"\n        hide-default-footer\n        class=\"elevation-1\"\n    >\n      <template v-slot:item.detail=\"{ item }\">\n        <order-detail-dialog\n            :dialog=\"false\"\n            :orderId=\"item.orderId\"\n        ></order-detail-dialog>\n      </template>\n    </v-data-table>\n    <div class=\"text-center pt-2\">\n      <v-pagination\n          v-model=\"page\"\n          :length=\"pageCount\"\n          :total-visible=\"totalVisible\"\n      ></v-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nimport orderApi from '../api/order.js';\n\nimport DatePicker from \"@/components/DatePicker\";\nimport OrderDetailDialog from \"@/components/OrderDetailDialog\";\n\nconst moment = require('moment');\n\nexport default {\n  name: \"PrevOrder\",\n  components: {\n    'date-picker': DatePicker,\n    \"order-detail-dialog\": OrderDetailDialog\n  },\n  mounted: function() {\n    this.search();\n  },\n  watch: {\n    \"page\": function () {\n      this.search();\n    }\n  },\n  data: function() {\n    return {\n      // date\n      startDate: '',\n      endDate: '',\n\n      // pagination\n      page: 1,\n      pageCount: 1,\n      itemsPerPage: 10,\n      totalVisible: 10,\n\n      // data table\n      headers: [\n        {\n          text: '주문번호',\n          align: 'start',\n          sortable: false,\n          value: 'orderId',\n        },\n        { text: '주문상태', value: 'orderStatus' },\n        { text: '주문시간', value: 'orderTime' },\n        { text: '주문상품', value: 'orderItemNames' },\n        { text: '결제금액', value: 'orderPrice' },\n        { text: '닉네임', value: 'userName' },\n        { text: '상세보기', value: 'detail', sortable: false}\n      ],\n      orders: [],\n    }\n  },\n  methods: {\n    search: function() {\n      if(!this.checkDate()) return;\n\n      orderApi.requestPrevOrder(this.startDate, this.endDate, this.page - 1)\n          .then( (response) => {\n            this.renderList(response.data);\n          })\n          .catch( (error) => {\n            console.log(error);\n          });\n    },\n    renderList: function(json) {\n      const orders = json.data.orders;\n\n      this.orders = [];\n      orders.forEach(order => {\n\n        this.orders.push({\n          orderId: order.orderId,\n          orderStatus: this.$options.filters.getOrderStatusName(order.orderStatus),\n          orderTime: order.orderTime,\n          orderItemNames: this.getOrderItemName(order.orderItems),\n          orderPrice: this.$options.filters.currency(order.orderPrice),\n          userName: order.userName\n        });\n      })\n\n      // pagination setting\n      const page = json.data.page;\n      this.page = page.startPage + 1;\n      this.pageCount = page.totalPage;\n    },\n    checkDate: function() {\n      if (!this.startDate || !this.endDate) {\n        alert(\"시작일과 종료일을 입력해주세요.\");\n        return false;\n      }\n\n      if (moment(this.startDate).isAfter(this.endDate)) {\n        alert(\"시작일은 종료일보다 클 수 없습니다.\");\n        return false;\n      }\n\n      return true;\n    },\n    inputStartDate: function(value) {\n      this.startDate = value;\n    },\n    inputEndDate: function(value) {\n      this.endDate = value;\n    },\n    getOrderItemName: function(orderItems) {\n      const orderItemLength = orderItems.length;\n      const orderItemName = orderItems[0].orderItemName;\n      if (orderItemLength == 1) {\n        return orderItemName;\n      } else if (orderItemLength > 1) {\n        return orderItemName + \" 외 \" + (orderItemLength - 1) + \"건\";\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrevOrder.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PrevOrder.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PrevOrder.vue?vue&type=template&id=2a37639e&scoped=true&\"\nimport script from \"./PrevOrder.vue?vue&type=script&lang=js&\"\nexport * from \"./PrevOrder.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a37639e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}